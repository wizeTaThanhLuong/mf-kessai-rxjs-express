# Start project with docker
Docker container run by user `node`, make sure the permission for `node` supplied.
```$xslt
docker-compose up -d
```

# Project Generation

## Nodejs and Express
> Project's structure was generated by [express-generator-typescript](https://github.com/seanpmaxwell/express-generator-typescript) package

## MF Kessai API
> Client API, for MF Kessai, was generated by openAPI generator with TypeScript/RxJS framework
> Generated code includes: src/apis folder, src/models folder, and src/runtime.ts file

The original source are in [master_origin](https://github.com/wizeTaThanhLuong/mf-kessai-rxjs-express/tree/master_origin) branch.

## Fix Errors
 - The `runtime.ts` file has some type definition errors, so it need to leave some `// @ts-ignore` comments.

  - [See more...](https://github.com/wizeTaThanhLuong/mf-kessai-rxjs-express/commit/6226eb82cc0bc1249146946c2628e88dcf59d2d2)

## Sendgrid Mailer
> We use sendgrid API via [nodemailer](https://github.com/nodemailer/nodemailer),
 and [nodemailer-sendgrid-transport](https://github.com/sendgrid/nodemailer-sendgrid-transport) package.

## Testing API
It's need to config `MF_KESSAI_API_KEY` and `SENDGRID_API_KEY` in `env` files, before testing.

#### Get billings list
> GET: [domain]/extapi/mf/billings

#### Get billing detail
> GET: [domain]/extapi/mf/billings/:id

#### Send email test with sendgrid
> POST: [domain]/extapi/sg/sendMail

```$xslt
curl --location --request POST '${domain}/extapi/sg/sendMail' \
--header 'Content-Type: application/json' \
--header 'apikey: apikey' \
--data-raw '{
	"to": "example@email.com"
}'
```

#### TrustDock Test
> HTML: [domain]/test.html

> Via APP: [domain]/app-flow.html

Get all plans
> POST /extapi/td/get-plans
> { matching: boolean; }

Choose a plan for verification
> PUT /extapi/td/choose-plans
> { id: string; ids: string[]; }

Submit documents
> PUT /extapi/td/confirm-documents
> { id: string; plan_id: string[]; documents: [TPersonalPlan](https://github.com/wizeTaThanhLuong/mf-kessai-rxjs-express/blob/master/src/types/trustDockDocuments.ts#L52); }

Compare document with data
> PUT /extapi/td/compare-data
> { id: string; data: [TComparingData](https://github.com/wizeTaThanhLuong/mf-kessai-rxjs-express/blob/master/src/types/trustDockData.ts#L18); }

Get verification's status
> GET /extapi/td/verification/:id

Delete verification result
> DELETE /extapi/td/verification/:id
